library(readr)
library(dplyr)
library(ggplot2)
library(lubridate)
library(paletteer)
paleta = paletteer_d("ggsci::category20b_d3")
data_mediciones_geolocaliazadas_dummies <- read_csv("/Users/agusvaser/Documents/Personal/riachuelo-clieaning/data_mediciones_geolocaliazadas_dummies.csv")
data_mediciones_geolocaliazadas_dummies %>% summary()
View(data_mediciones_geolocaliazadas_dummies)
colnames(data_mediciones_geolocaliazadas_dummies)
data_mediciones_geolocaliazadas_dummies$Fecha %>% summary()
nrow(data_mediciones_geolocaliazadas_dummies)
colnames(dfsinna)
data_mediciones_geolocaliazadas_dummies %>% summary()
View(data_mediciones_geolocaliazadas_dummies)
colnames(data_mediciones_geolocaliazadas_dummies)
data_mediciones_geolocaliazadas_dummies$Fecha %>% summary()
nrow(data_mediciones_geolocaliazadas_dummies)
colnames(dfsinna)
dfsinna = na.omit(data_mediciones_geolocaliazadas_dummies)
dfsinna = dfsinna %>% mutate(nivel = case_when(
`Cumple Limites Ia`== TRUE ~ 5,
`Cumple Limites Ib`== TRUE ~ 4,
`Cumple Limites II`== TRUE ~ 3,
`Cumple Limites III`== TRUE ~ 2,
`Cumple Limites IV`== TRUE ~ 1,
`Cumple Limites IV`== FALSE ~ 0,
))
# Tabla de frecuencia de niveles
table(dfsinna$nivel)
View(dfsinna)
tabla_resumen <- aggregate(dfsinna$nivel, by = list(dfsinna$Estación, dfsinna$Fecha,dfsinna$Cuenca,dfsinna$Subcuenca), FUN = min)
colnames(tabla_resumen) <- c("Estacion", "Fecha","Cuenca","Sub Cuenca", "Nivel_Minimo")
registros_por_fecha_estacion <- aggregate(nivel ~ Cuenca + Subcuenca + Fecha + Estación, data = dfsinna, FUN = length)
colnames(registros_por_fecha_estacion) <- c("Cuenca","Sub Cuenca", "Fecha", "Estacion", "Registros")
# Agrupado por estacion, fecha, otorgandole un nivel minimo adaptando a la peor medida y
# la cantidad de medidad observadas
resumen_filtrado <- merge(tabla_resumen, registros_por_fecha_estacion)
resumen_filtrado <- resumen_filtrado[resumen_filtrado$Registros >= 9, ]
resumen_filtrado[resumen_filtrado$Nivel_Minimo==5,]
nrow(resumen_filtrado)
dfsinna %>%
group_by(Cuenca, month(Fecha)) %>%
summarize(Promedio_Nivel = mean(nivel))
dfsinna %>%
group_by(Cuenca, month(Fecha),year(Fecha)) %>%
summarize(Promedio_Nivel = mean(nivel))
dfsinna %>%
group_by(Cuenca, year(Fecha),month(Fecha)) %>%
summarize(Promedio_Nivel = mean(nivel))
registros_por_fecha_estacion
nrow(registros_por_fecha_estacion)
